# üö® –≠–ö–°–¢–†–ï–ù–ù–û–ï –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ò–ï SSH –î–û–°–¢–£–ü–ê

## –ï—Å–ª–∏ –≤—ã –ø–æ—Ç–µ—Ä—è–ª–∏ SSH –¥–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–µ—Ä—É

### üî• –ù–ï–ú–ï–î–õ–ï–ù–ù–´–ï –î–ï–ô–°–¢–í–ò–Ø

#### 1. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Ä–∞–∑–Ω—ã–µ –ø–æ—Ä—Ç—ã
```bash
# –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ SSH –ø–æ—Ä—Ç—ã
ssh user@server -p 22
ssh user@server -p 2222  
ssh user@server -p 2200
ssh user@server -p 2022
```

#### 2. –ï—Å–ª–∏ –µ—Å—Ç—å —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π/–∫–æ–Ω—Å–æ–ª—å–Ω—ã–π –¥–æ—Å—Ç—É–ø
```bash
# –í–æ–π–¥–∏—Ç–µ —á–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
sudo ./emergency_ssh_fix.sh
```

### üõ†Ô∏è –†–£–ß–ù–û–ï –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ò–ï

#### –ï—Å–ª–∏ –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–∫—Ä–∏–ø—Ç—É –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è:

```bash
# 1. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å SSH –ø–æ—Ä—Ç –Ω–∞ 22
sudo sed -i 's/^Port.*/Port 22/' /etc/ssh/sshd_config

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
sudo sshd -t

# 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å SSH
sudo systemctl restart ssh

# 4. –û—Ç–∫—Ä—ã—Ç—å –ø–æ—Ä—Ç –≤ UFW
sudo ufw allow 22/tcp

# 5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
sudo systemctl status ssh
sudo ufw status
```

### üîç –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –ü–†–û–ë–õ–ï–ú–´

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â–∏–π SSH –ø–æ—Ä—Ç
grep "^Port" /etc/ssh/sshd_config

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å SSH —Å–ª—É–∂–±—ã  
sudo systemctl status ssh

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å UFW –ø—Ä–∞–≤–∏–ª–∞
sudo ufw status numbered

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–µ SSH —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
sudo ss -tlnp | grep ssh

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ SSH
sudo journalctl -u ssh -n 20
```

### üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –°–ò–¢–£–ê–¶–ò–Ø - –ü–û–õ–ù–´–ô –°–ë–†–û–°

–ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç:

```bash
# 1. –û—Ç–∫–ª—é—á–∏—Ç—å —Ñ–∞–π—Ä–≤–æ–ª –ø–æ–ª–Ω–æ—Å—Ç—å—é
sudo systemctl stop ufw
sudo ufw --force reset

# 2. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å SSH –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
sudo cp /etc/ssh/sshd_config /etc/ssh/sshd_config.broken
sudo sed -i 's/^Port.*/Port 22/' /etc/ssh/sshd_config
sudo sed -i 's/^PasswordAuthentication.*/PasswordAuthentication yes/' /etc/ssh/sshd_config

# 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å SSH
sudo systemctl restart ssh

# 4. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –±–∞–∑–æ–≤—ã–π UFW
sudo ufw allow 22/tcp
sudo ufw --force enable

# 5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø
ssh user@server -p 22
```

### üìã –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ò–ï –ò–ó –ë–ï–ö–ê–ü–ê

Security Toolkit –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç –±–µ–∫–∞–ø—ã:

```bash
# –ù–∞–π—Ç–∏ –±–µ–∫–∞–ø—ã SSH –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
ls -la /etc/ssh/sshd_config.backup.*

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ –±–µ–∫–∞–ø–∞
sudo cp /etc/ssh/sshd_config.backup.YYYYMMDD_HHMMSS /etc/ssh/sshd_config
sudo systemctl restart ssh
```

### üîß –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï –°–ö–†–ò–ü–¢–ê –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ò–Ø

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
sudo ./emergency_ssh_fix.sh

# –í—ã–±–µ—Ä–∏—Ç–µ –Ω—É–∂–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ:
# 1. –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ - –ø–æ–∫–∞–∂–µ—Ç —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
# 2. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ—Ä—Ç 22 - –≤–µ—Ä–Ω–µ—Ç SSH –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ä—Ç  
# 3. –û—Ç–∫—Ä—ã—Ç—å –≤—Å–µ SSH –ø–æ—Ä—Ç—ã - –≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫—Ä–æ–µ—Ç –¥–æ—Å—Ç—É–ø
# 4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å SSH - –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç —Å–ª—É–∂–±—É
# 5. –ü–æ–∫–∞–∑–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é - –ø–æ–∫–∞–∂–µ—Ç —Ç–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
# 6. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ –±–µ–∫–∞–ø–∞ - –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç –∏–∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏
```

### ‚ö†Ô∏è –ü–†–ï–î–û–¢–í–†–ê–©–ï–ù–ò–ï –ü–†–û–ë–õ–ï–ú –í –ë–£–î–£–©–ï–ú

1. **–í—Å–µ–≥–¥–∞ —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ SSH –≤ –Ω–æ–≤–æ–π —Å–µ—Å—Å–∏–∏** –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã—Ç–∏–µ–º —Ç–µ–∫—É—â–µ–π
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ screen/tmux** –ø—Ä–∏ –≤–Ω–µ—Å–µ–Ω–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ SSH
3. **–°–æ–∑–¥–∞–≤–∞–π—Ç–µ –±–µ–∫–∞–ø—ã** –ø–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ (Security Toolkit –¥–µ–ª–∞–µ—Ç —ç—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
4. **–ò–º–µ–π—Ç–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± –¥–æ—Å—Ç—É–ø–∞** (–∫–æ–Ω—Å–æ–ª—å, VNC, —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π –¥–æ—Å—Ç—É–ø)

### üÜò –ï–°–õ–ò –ù–ò–ß–ï–ì–û –ù–ï –ü–û–ú–û–ì–ê–ï–¢

1. **–§–∏–∑–∏—á–µ—Å–∫–∏–π –¥–æ—Å—Ç—É–ø** - –ø–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É –Ω–∞–ø—Ä—è–º—É—é
2. **–ö–æ–Ω—Å–æ–ª—å –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–µ–±-–∫–æ–Ω—Å–æ–ª—å —Ö–æ—Å—Ç–∏–Ω–≥-–ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞  
3. **Rescue —Ä–µ–∂–∏–º** - –∑–∞–≥—Ä—É–∑–∏—Ç–µ—Å—å –≤ rescue —Ä–µ–∂–∏–º –∏ –∏—Å–ø—Ä–∞–≤—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
4. **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ —Å–Ω–∞–ø—à–æ—Ç–∞** - –µ—Å–ª–∏ –µ—Å—Ç—å —Å–Ω–∞–ø—à–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã

### üìû –¢–ï–•–ù–ò–ß–ï–°–ö–ê–Ø –ü–û–î–î–ï–†–ñ–ö–ê

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –∏ –≤—ã –Ω–µ –º–æ–∂–µ—Ç–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–æ—Å—Ç—É–ø:

1. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ —Å–∏—Å—Ç–µ–º–Ω–æ–º—É –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É
2. –°–≤—è–∂–∏—Ç–µ—Å—å —Å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ö–æ—Å—Ç–∏–Ω–≥-–ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
3. –°–æ–∑–¥–∞–π—Ç–µ Issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏: https://github.com/Escanor-87/server-security-toolkit/issues

---

**üõ°Ô∏è Security Toolkit –≤—Å–µ–≥–¥–∞ —Å–æ–∑–¥–∞–µ—Ç —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ –ø–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏!**
